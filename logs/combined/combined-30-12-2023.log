{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T17:00:14.270Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T17:02:35.288Z"}
{"level":"error","message":"Le livre avec l'id 3777 n'a pas été trouvé.","requestPayload":{"originalUrl":"/book/3777","params":{},"rawHeaders":["Host","localhost:3000","User-Agent","insomnia/8.4.2","Accept","*/*"],"route":{"methods":{"get":true},"path":"/book/:id","stack":[{"keys":[],"method":"get","name":"getBookById","regexp":{"fast_slash":false,"fast_star":false}}]}},"stack":"Error\n    at new CustomError (/Users/maxime/Desktop/dev/books_directory/errors/customError.js:6:27)\n    at getBookById (/Users/maxime/Desktop/dev/books_directory/db/queries.js:39:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","statusCode":500,"timestamp":"2023-12-30T17:03:32.820Z"}
{"level":"error","message":"syntax error at or near \"WHERE\"","requestPayload":{"body":{},"originalUrl":"/book/116","params":{},"rawHeaders":["Host","localhost:3000","Content-Type","multipart/form-data; boundary=X-INSOMNIA-BOUNDARY","User-Agent","insomnia/8.4.2","Accept","*/*","Content-Length","25"],"route":{"methods":{"patch":true},"path":"/book/:id","stack":[{"keys":[],"method":"patch","name":"multerMiddleware","regexp":{"fast_slash":false,"fast_star":false}},{"keys":[],"method":"patch","name":"updateBook","regexp":{"fast_slash":false,"fast_star":false}}]}},"stack":"Error\n    at new CustomError (/Users/maxime/Desktop/dev/books_directory/errors/customError.js:6:27)\n    at updateBook (/Users/maxime/Desktop/dev/books_directory/db/queries.js:139:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","statusCode":500,"timestamp":"2023-12-30T17:06:10.473Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T17:06:50.965Z"}
{"level":"error","message":"syntax error at or near \"WHERE\"","requestPayload":{"body":{},"originalUrl":"/book/116","params":{},"rawHeaders":["Host","localhost:3000","Content-Type","multipart/form-data; boundary=X-INSOMNIA-BOUNDARY","User-Agent","insomnia/8.4.2","Accept","*/*","Content-Length","25"],"route":{"methods":{"patch":true},"path":"/book/:id","stack":[{"keys":[],"method":"patch","name":"multerMiddleware","regexp":{"fast_slash":false,"fast_star":false}},{"keys":[],"method":"patch","name":"updateBook","regexp":{"fast_slash":false,"fast_star":false}}]}},"stack":"Error\n    at new CustomError (/Users/maxime/Desktop/dev/books_directory/errors/customError.js:6:27)\n    at updateBook (/Users/maxime/Desktop/dev/books_directory/db/queries.js:139:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","statusCode":500,"timestamp":"2023-12-30T17:06:57.996Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T17:07:33.153Z"}
{"level":"error","message":"updatedBook is not defined","requestPayload":{"body":{},"originalUrl":"/book/116","params":{},"rawHeaders":["Host","localhost:3000","Content-Type","multipart/form-data; boundary=X-INSOMNIA-BOUNDARY","User-Agent","insomnia/8.4.2","Accept","*/*","Content-Length","25"],"route":{"methods":{"patch":true},"path":"/book/:id","stack":[{"keys":[],"method":"patch","name":"multerMiddleware","regexp":{"fast_slash":false,"fast_star":false}},{"keys":[],"method":"patch","name":"updateBook","regexp":{"fast_slash":false,"fast_star":false}}]}},"stack":"Error\n    at new CustomError (/Users/maxime/Desktop/dev/books_directory/errors/customError.js:6:27)\n    at updateBook (/Users/maxime/Desktop/dev/books_directory/db/queries.js:140:10)\n    at Layer.handle [as handle_request] (/Users/maxime/Desktop/dev/books_directory/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/maxime/Desktop/dev/books_directory/node_modules/express/lib/router/route.js:144:13)\n    at done (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:45:7)\n    at indicateDone (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:49:68)\n    at Multipart.<anonymous> (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:166:7)\n    at Multipart.emit (node:events:514:28)\n    at emitCloseNT (node:internal/streams/destroy:132:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)","statusCode":500,"timestamp":"2023-12-30T17:07:34.845Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T17:07:55.185Z"}
{"level":"error","message":"cannot update book with empty values","requestPayload":{"body":{},"originalUrl":"/book/116","params":{},"rawHeaders":["Host","localhost:3000","Content-Type","multipart/form-data; boundary=X-INSOMNIA-BOUNDARY","User-Agent","insomnia/8.4.2","Accept","*/*","Content-Length","25"],"route":{"methods":{"patch":true},"path":"/book/:id","stack":[{"keys":[],"method":"patch","name":"multerMiddleware","regexp":{"fast_slash":false,"fast_star":false}},{"keys":[],"method":"patch","name":"updateBook","regexp":{"fast_slash":false,"fast_star":false}}]}},"stack":"Error\n    at new CustomError (/Users/maxime/Desktop/dev/books_directory/errors/customError.js:6:27)\n    at updateBook (/Users/maxime/Desktop/dev/books_directory/db/queries.js:140:10)\n    at Layer.handle [as handle_request] (/Users/maxime/Desktop/dev/books_directory/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/maxime/Desktop/dev/books_directory/node_modules/express/lib/router/route.js:144:13)\n    at done (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:45:7)\n    at indicateDone (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:49:68)\n    at Multipart.<anonymous> (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:166:7)\n    at Multipart.emit (node:events:514:28)\n    at emitCloseNT (node:internal/streams/destroy:132:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)","statusCode":500,"timestamp":"2023-12-30T17:07:56.294Z"}
{"level":"error","message":"updatedBook is not defined","requestPayload":{"body":{"author":"Georges Orwell "},"originalUrl":"/book/116","params":{},"rawHeaders":["Host","localhost:3000","Content-Type","multipart/form-data; boundary=X-INSOMNIA-BOUNDARY","User-Agent","insomnia/8.4.2","Accept","*/*","Content-Length","114"],"route":{"methods":{"patch":true},"path":"/book/:id","stack":[{"keys":[],"method":"patch","name":"multerMiddleware","regexp":{"fast_slash":false,"fast_star":false}},{"keys":[],"method":"patch","name":"updateBook","regexp":{"fast_slash":false,"fast_star":false}}]}},"stack":"Error\n    at new CustomError (/Users/maxime/Desktop/dev/books_directory/errors/customError.js:6:27)\n    at updateBook (/Users/maxime/Desktop/dev/books_directory/db/queries.js:140:10)\n    at Layer.handle [as handle_request] (/Users/maxime/Desktop/dev/books_directory/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/maxime/Desktop/dev/books_directory/node_modules/express/lib/router/route.js:144:13)\n    at done (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:45:7)\n    at indicateDone (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:49:68)\n    at Multipart.<anonymous> (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:166:7)\n    at Multipart.emit (node:events:514:28)\n    at emitCloseNT (node:internal/streams/destroy:132:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)","statusCode":500,"timestamp":"2023-12-30T17:08:36.644Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T17:08:45.081Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T17:11:43.712Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T17:13:14.324Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T17:18:11.054Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T17:18:54.462Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T17:19:33.141Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T17:19:54.399Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T17:20:49.941Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T17:22:16.645Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T17:23:52.523Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T17:24:47.727Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T20:35:24.438Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T20:39:36.366Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T20:39:48.486Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T20:40:56.178Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T20:41:57.072Z"}
{"level":"error","message":"Le champ 'title' est requis.","requestPayload":{"body":{"author":"Aldous Huxley ","country":"England","language":"English","link":"https://fr.wikipedia.org/wiki/Le_Meilleur_des_mondes","pages":"285","year":"1932"},"originalUrl":"/","params":{},"rawHeaders":["Host","localhost:3000","Content-Type","multipart/form-data; boundary=X-INSOMNIA-BOUNDARY","User-Agent","insomnia/8.3.0","Accept","*/*","Content-Length","51224"],"route":{"methods":{"post":true},"path":"/","stack":[{"keys":[],"method":"post","name":"multerMiddleware","regexp":{"fast_slash":false,"fast_star":false}},{"keys":[],"method":"post","name":"<anonymous>","regexp":{"fast_slash":false,"fast_star":false}}]}},"stack":"Error: Le champ 'title' est requis.\n    at DiskStorage.filename [as getFilename] (/Users/maxime/Desktop/dev/books_directory/server.js:46:15)\n    at /Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:34:10\n    at DiskStorage.getDestination (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:22:51)\n    at DiskStorage._handleFile (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:31:8)\n    at /Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:137:17\n    at allowAll (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/index.js:8:3)\n    at wrappedFileFilter (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:107:7)\n    at Multipart.emit (node:events:514:28)\n    at HeaderParser.cb (/Users/maxime/Desktop/dev/books_directory/node_modules/busboy/lib/types/multipart.js:358:14)","timestamp":"2023-12-30T20:42:15.748Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T20:43:33.190Z"}
{"level":"error","message":"Le champ 'title' est requis.","requestPayload":{"body":{"author":"Aldous Huxley ","country":"England","language":"English","link":"https://fr.wikipedia.org/wiki/Le_Meilleur_des_mondes","pages":"285","year":"1932"},"originalUrl":"/","params":{},"rawHeaders":["Host","localhost:3000","Content-Type","multipart/form-data; boundary=X-INSOMNIA-BOUNDARY","User-Agent","insomnia/8.3.0","Accept","*/*","Content-Length","51224"],"route":{"methods":{"post":true},"path":"/","stack":[{"keys":[],"method":"post","name":"multerMiddleware","regexp":{"fast_slash":false,"fast_star":false}},{"keys":[],"method":"post","name":"<anonymous>","regexp":{"fast_slash":false,"fast_star":false}}]}},"stack":"Error: Le champ 'title' est requis.\n    at DiskStorage.filename [as getFilename] (/Users/maxime/Desktop/dev/books_directory/server.js:46:15)\n    at /Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:34:10\n    at DiskStorage.getDestination (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:22:51)\n    at DiskStorage._handleFile (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:31:8)\n    at /Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:137:17\n    at allowAll (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/index.js:8:3)\n    at wrappedFileFilter (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:107:7)\n    at Multipart.emit (node:events:514:28)\n    at HeaderParser.cb (/Users/maxime/Desktop/dev/books_directory/node_modules/busboy/lib/types/multipart.js:358:14)","timestamp":"2023-12-30T20:44:22.539Z"}
{"level":"error","message":"Aucun fichier n'a été téléchargé.","requestPayload":{"body":{"author":"Aldous Huxley ","country":"England","language":"English","link":"https://fr.wikipedia.org/wiki/Le_Meilleur_des_mondes","pages":"285","title":"Le meilleur Des Mondes","year":"1932"},"originalUrl":"/","params":{},"rawHeaders":["Host","localhost:3000","Content-Type","multipart/form-data; boundary=X-INSOMNIA-BOUNDARY","User-Agent","insomnia/8.3.0","Accept","*/*","Content-Length","51319"],"route":{"methods":{"post":true},"path":"/","stack":[{"keys":[],"method":"post","name":"multerMiddleware","regexp":{"fast_slash":false,"fast_star":false}},{"keys":[],"method":"post","name":"<anonymous>","regexp":{"fast_slash":false,"fast_star":false}}]}},"stack":"Error: Aucun fichier n'a été téléchargé.\n    at DiskStorage.filename [as getFilename] (/Users/maxime/Desktop/dev/books_directory/server.js:50:15)\n    at /Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:34:10\n    at DiskStorage.getDestination (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:22:51)\n    at DiskStorage._handleFile (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:31:8)\n    at /Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:137:17\n    at allowAll (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/index.js:8:3)\n    at wrappedFileFilter (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:107:7)\n    at Multipart.emit (node:events:514:28)\n    at HeaderParser.cb (/Users/maxime/Desktop/dev/books_directory/node_modules/busboy/lib/types/multipart.js:358:14)","timestamp":"2023-12-30T20:44:49.411Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T20:45:20.541Z"}
{"level":"error","message":"Aucun fichier n'a été téléchargé.","requestPayload":{"body":{"author":"Aldous Huxley ","country":"England","language":"English","link":"https://fr.wikipedia.org/wiki/Le_Meilleur_des_mondes","pages":"285","title":"Le meilleur Des Mondes","year":"1932"},"originalUrl":"/","params":{},"rawHeaders":["Host","localhost:3000","Content-Type","multipart/form-data; boundary=X-INSOMNIA-BOUNDARY","User-Agent","insomnia/8.3.0","Accept","*/*","Content-Length","51319"],"route":{"methods":{"post":true},"path":"/","stack":[{"keys":[],"method":"post","name":"multerMiddleware","regexp":{"fast_slash":false,"fast_star":false}},{"keys":[],"method":"post","name":"<anonymous>","regexp":{"fast_slash":false,"fast_star":false}}]}},"stack":"Error: Aucun fichier n'a été téléchargé.\n    at DiskStorage.filename [as getFilename] (/Users/maxime/Desktop/dev/books_directory/server.js:50:15)\n    at /Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:34:10\n    at DiskStorage.getDestination (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:22:51)\n    at DiskStorage._handleFile (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:31:8)\n    at /Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:137:17\n    at allowAll (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/index.js:8:3)\n    at wrappedFileFilter (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:107:7)\n    at Multipart.emit (node:events:514:28)\n    at HeaderParser.cb (/Users/maxime/Desktop/dev/books_directory/node_modules/busboy/lib/types/multipart.js:358:14)","timestamp":"2023-12-30T20:46:24.502Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T20:47:09.994Z"}
{"level":"info","message":"storing image : le-meilleur-des-mondes.jpeg","timestamp":"2023-12-30T20:47:12.163Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T20:48:48.431Z"}
{"level":"error","message":"req is not defined","requestPayload":{"body":{"author":"Aldous Huxley ","country":"England","language":"English","link":"https://fr.wikipedia.org/wiki/Le_Meilleur_des_mondes","pages":"285","title":"Le meilleur Des Mondes","year":"1932"},"originalUrl":"/","params":{},"rawHeaders":["Host","localhost:3000","Content-Type","multipart/form-data; boundary=X-INSOMNIA-BOUNDARY","User-Agent","insomnia/8.3.0","Accept","*/*","Content-Length","51319"],"route":{"methods":{"post":true},"path":"/","stack":[{"keys":[],"method":"post","name":"multerMiddleware","regexp":{"fast_slash":false,"fast_star":false}},{"keys":[],"method":"post","name":"createBook","regexp":{"fast_slash":false,"fast_star":false}}]}},"stack":"ReferenceError: req is not defined\n    at DiskStorage.filename [as getFilename] (/Users/maxime/Desktop/dev/books_directory/server.js:41:19)\n    at /Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:34:10\n    at DiskStorage.getDestination (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:22:51)\n    at DiskStorage._handleFile (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:31:8)\n    at /Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:137:17\n    at allowAll (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/index.js:8:3)\n    at wrappedFileFilter (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:107:7)\n    at Multipart.emit (node:events:514:28)\n    at HeaderParser.cb (/Users/maxime/Desktop/dev/books_directory/node_modules/busboy/lib/types/multipart.js:358:14)","timestamp":"2023-12-30T20:48:51.099Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T20:49:00.316Z"}
{"level":"error","message":"req is not defined","requestPayload":{"body":{"author":"Aldous Huxley ","country":"England","language":"English","link":"https://fr.wikipedia.org/wiki/Le_Meilleur_des_mondes","pages":"285","title":"Le meilleur Des Mondes","year":"1932"},"originalUrl":"/","params":{},"rawHeaders":["Host","localhost:3000","Content-Type","multipart/form-data; boundary=X-INSOMNIA-BOUNDARY","User-Agent","insomnia/8.3.0","Accept","*/*","Content-Length","51319"],"route":{"methods":{"post":true},"path":"/","stack":[{"keys":[],"method":"post","name":"multerMiddleware","regexp":{"fast_slash":false,"fast_star":false}},{"keys":[],"method":"post","name":"createBook","regexp":{"fast_slash":false,"fast_star":false}}]}},"stack":"ReferenceError: req is not defined\n    at DiskStorage.filename [as getFilename] (/Users/maxime/Desktop/dev/books_directory/server.js:46:7)\n    at /Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:34:10\n    at DiskStorage.getDestination (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:22:51)\n    at DiskStorage._handleFile (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:31:8)\n    at /Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:137:17\n    at allowAll (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/index.js:8:3)\n    at wrappedFileFilter (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:107:7)\n    at Multipart.emit (node:events:514:28)\n    at HeaderParser.cb (/Users/maxime/Desktop/dev/books_directory/node_modules/busboy/lib/types/multipart.js:358:14)","timestamp":"2023-12-30T20:49:04.473Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T20:49:17.019Z"}
{"level":"error","message":"req is not defined","requestPayload":{"body":{"author":"Aldous Huxley ","country":"England","language":"English","link":"https://fr.wikipedia.org/wiki/Le_Meilleur_des_mondes","pages":"285","title":"Le meilleur Des Mondes","year":"1932"},"originalUrl":"/","params":{},"rawHeaders":["Host","localhost:3000","Content-Type","multipart/form-data; boundary=X-INSOMNIA-BOUNDARY","User-Agent","insomnia/8.3.0","Accept","*/*","Content-Length","51319"],"route":{"methods":{"post":true},"path":"/","stack":[{"keys":[],"method":"post","name":"multerMiddleware","regexp":{"fast_slash":false,"fast_star":false}},{"keys":[],"method":"post","name":"createBook","regexp":{"fast_slash":false,"fast_star":false}}]}},"stack":"ReferenceError: req is not defined\n    at DiskStorage.filename [as getFilename] (/Users/maxime/Desktop/dev/books_directory/server.js:46:7)\n    at /Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:34:10\n    at DiskStorage.getDestination (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:22:51)\n    at DiskStorage._handleFile (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:31:8)\n    at /Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:137:17\n    at allowAll (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/index.js:8:3)\n    at wrappedFileFilter (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:107:7)\n    at Multipart.emit (node:events:514:28)\n    at HeaderParser.cb (/Users/maxime/Desktop/dev/books_directory/node_modules/busboy/lib/types/multipart.js:358:14)","timestamp":"2023-12-30T20:49:18.620Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T20:49:29.370Z"}
{"level":"info","message":"Storing image: le-meilleur-des-mondes.jpeg","timestamp":"2023-12-30T20:49:31.342Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T20:52:28.292Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T20:52:46.975Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T20:52:54.866Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T20:53:08.000Z"}
{"level":"error","message":"nique sa race","requestPayload":{"body":{"author":"Aldous Huxley ","country":"England","language":"English","link":"https://fr.wikipedia.org/wiki/Le_Meilleur_des_mondes","pages":"285","title":"Le meilleur Des Mondes","year":"1932"},"originalUrl":"/","params":{},"rawHeaders":["Host","localhost:3000","Content-Type","multipart/form-data; boundary=X-INSOMNIA-BOUNDARY","User-Agent","insomnia/8.3.0","Accept","*/*","Content-Length","649"],"route":{"methods":{"post":true},"path":"/","stack":[{"keys":[],"method":"post","name":"multerMiddleware","regexp":{"fast_slash":false,"fast_star":false}},{"keys":[],"method":"post","name":"createBook","regexp":{"fast_slash":false,"fast_star":false}}]}},"stack":"Error\n    at new CustomError (/Users/maxime/Desktop/dev/books_directory/errors/customError.js:6:27)\n    at createBook (/Users/maxime/Desktop/dev/books_directory/db/queries.js:66:10)\n    at Layer.handle [as handle_request] (/Users/maxime/Desktop/dev/books_directory/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/maxime/Desktop/dev/books_directory/node_modules/express/lib/router/route.js:144:13)\n    at done (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:45:7)\n    at indicateDone (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:49:68)\n    at Multipart.<anonymous> (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:166:7)\n    at Multipart.emit (node:events:514:28)\n    at emitCloseNT (node:internal/streams/destroy:132:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)","statusCode":500,"timestamp":"2023-12-30T20:53:09.350Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T20:54:28.705Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T20:54:34.878Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T20:54:42.843Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T20:54:47.460Z"}
{"level":"error","message":"Cannot read properties of undefined (reading 'path')","requestPayload":{"body":{"author":"Aldous Huxley ","country":"England","language":"English","link":"https://fr.wikipedia.org/wiki/Le_Meilleur_des_mondes","pages":"285","title":"Le meilleur Des Mondes","year":"1932"},"originalUrl":"/","params":{},"rawHeaders":["Host","localhost:3000","Content-Type","multipart/form-data; boundary=X-INSOMNIA-BOUNDARY","User-Agent","insomnia/8.3.0","Accept","*/*","Content-Length","649"],"route":{"methods":{"post":true},"path":"/","stack":[{"keys":[],"method":"post","name":"multerMiddleware","regexp":{"fast_slash":false,"fast_star":false}},{"keys":[],"method":"post","name":"createBook","regexp":{"fast_slash":false,"fast_star":false}}]}},"stack":"Error\n    at new CustomError (/Users/maxime/Desktop/dev/books_directory/errors/customError.js:6:27)\n    at createBook (/Users/maxime/Desktop/dev/books_directory/db/queries.js:66:10)\n    at Layer.handle [as handle_request] (/Users/maxime/Desktop/dev/books_directory/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/maxime/Desktop/dev/books_directory/node_modules/express/lib/router/route.js:144:13)\n    at done (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:45:7)\n    at indicateDone (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:49:68)\n    at Multipart.<anonymous> (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:166:7)\n    at Multipart.emit (node:events:514:28)\n    at emitCloseNT (node:internal/streams/destroy:132:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)","statusCode":500,"timestamp":"2023-12-30T20:55:00.554Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T20:56:31.370Z"}
{"level":"error","message":"Le champ 'title' est requis.","requestPayload":{"body":{"author":"Aldous Huxley"},"originalUrl":"/book/119","params":{},"rawHeaders":["Host","localhost:3000","Content-Type","multipart/form-data; boundary=X-INSOMNIA-BOUNDARY","User-Agent","insomnia/8.4.2","Accept","*/*","Content-Length","86422"],"route":{"methods":{"patch":true},"path":"/book/:id","stack":[{"keys":[],"method":"patch","name":"multerMiddleware","regexp":{"fast_slash":false,"fast_star":false}},{"keys":[],"method":"patch","name":"updateBook","regexp":{"fast_slash":false,"fast_star":false}}]}},"stack":"Error: Le champ 'title' est requis.\n    at DiskStorage.filename [as getFilename] (/Users/maxime/Desktop/dev/books_directory/server.js:33:15)\n    at /Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:34:10\n    at DiskStorage.getDestination (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:22:51)\n    at DiskStorage._handleFile (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:31:8)\n    at /Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:137:17\n    at allowAll (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/index.js:8:3)\n    at wrappedFileFilter (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:107:7)\n    at Multipart.emit (node:events:514:28)\n    at HeaderParser.cb (/Users/maxime/Desktop/dev/books_directory/node_modules/busboy/lib/types/multipart.js:358:14)","timestamp":"2023-12-30T20:57:19.084Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T20:58:12.281Z"}
{"level":"error","message":"lors de l'upload d'une image le champ 'title' est requis.","requestPayload":{"body":{"author":"Aldous Huxley"},"originalUrl":"/book/119","params":{},"rawHeaders":["Host","localhost:3000","Content-Type","multipart/form-data; boundary=X-INSOMNIA-BOUNDARY","User-Agent","insomnia/8.4.2","Accept","*/*","Content-Length","86422"],"route":{"methods":{"patch":true},"path":"/book/:id","stack":[{"keys":[],"method":"patch","name":"multerMiddleware","regexp":{"fast_slash":false,"fast_star":false}},{"keys":[],"method":"patch","name":"updateBook","regexp":{"fast_slash":false,"fast_star":false}}]}},"stack":"Error: lors de l'upload d'une image le champ 'title' est requis.\n    at DiskStorage.filename [as getFilename] (/Users/maxime/Desktop/dev/books_directory/server.js:33:15)\n    at /Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:34:10\n    at DiskStorage.getDestination (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:22:51)\n    at DiskStorage._handleFile (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:31:8)\n    at /Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:137:17\n    at allowAll (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/index.js:8:3)\n    at wrappedFileFilter (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:107:7)\n    at Multipart.emit (node:events:514:28)\n    at HeaderParser.cb (/Users/maxime/Desktop/dev/books_directory/node_modules/busboy/lib/types/multipart.js:358:14)","timestamp":"2023-12-30T20:58:13.801Z"}
{"level":"error","message":"cannot update book with empty values","requestPayload":{"body":{},"originalUrl":"/book/119","params":{},"rawHeaders":["Host","localhost:3000","Content-Type","multipart/form-data; boundary=X-INSOMNIA-BOUNDARY","User-Agent","insomnia/8.4.2","Accept","*/*","Content-Length","25"],"route":{"methods":{"patch":true},"path":"/book/:id","stack":[{"keys":[],"method":"patch","name":"multerMiddleware","regexp":{"fast_slash":false,"fast_star":false}},{"keys":[],"method":"patch","name":"updateBook","regexp":{"fast_slash":false,"fast_star":false}}]}},"stack":"Error\n    at new CustomError (/Users/maxime/Desktop/dev/books_directory/errors/customError.js:6:27)\n    at updateBook (/Users/maxime/Desktop/dev/books_directory/db/queries.js:140:10)\n    at Layer.handle [as handle_request] (/Users/maxime/Desktop/dev/books_directory/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/maxime/Desktop/dev/books_directory/node_modules/express/lib/router/route.js:144:13)\n    at done (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:45:7)\n    at indicateDone (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:49:68)\n    at Multipart.<anonymous> (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:166:7)\n    at Multipart.emit (node:events:514:28)\n    at emitCloseNT (node:internal/streams/destroy:132:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)","statusCode":500,"timestamp":"2023-12-30T20:58:36.294Z"}
{"level":"error","message":"lors de l'upload d'une image le champ 'title' est requis.","requestPayload":{"body":{},"originalUrl":"/book/119","params":{},"rawHeaders":["Host","localhost:3000","Content-Type","multipart/form-data; boundary=X-INSOMNIA-BOUNDARY","User-Agent","insomnia/8.4.2","Accept","*/*","Content-Length","86335"],"route":{"methods":{"patch":true},"path":"/book/:id","stack":[{"keys":[],"method":"patch","name":"multerMiddleware","regexp":{"fast_slash":false,"fast_star":false}},{"keys":[],"method":"patch","name":"updateBook","regexp":{"fast_slash":false,"fast_star":false}}]}},"stack":"Error: lors de l'upload d'une image le champ 'title' est requis.\n    at DiskStorage.filename [as getFilename] (/Users/maxime/Desktop/dev/books_directory/server.js:33:15)\n    at /Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:34:10\n    at DiskStorage.getDestination (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:22:51)\n    at DiskStorage._handleFile (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/storage/disk.js:31:8)\n    at /Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:137:17\n    at allowAll (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/index.js:8:3)\n    at wrappedFileFilter (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/index.js:44:7)\n    at Multipart.<anonymous> (/Users/maxime/Desktop/dev/books_directory/node_modules/multer/lib/make-middleware.js:107:7)\n    at Multipart.emit (node:events:514:28)\n    at HeaderParser.cb (/Users/maxime/Desktop/dev/books_directory/node_modules/busboy/lib/types/multipart.js:358:14)","timestamp":"2023-12-30T20:58:42.348Z"}
{"level":"info","message":"Storing image: la-meilleur-des-monda.jpeg","timestamp":"2023-12-30T20:59:01.327Z"}
{"level":"info","message":"Storing image: le-meilleur-des-monde.jpeg","timestamp":"2023-12-30T20:59:17.700Z"}
{"level":"info","message":"Storing image: le-meilleur-des-monde.jpeg","timestamp":"2023-12-30T21:01:07.752Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T21:05:05.560Z"}
{"level":"info","message":"Storing image: le-meilleur-des-monde.jpeg","timestamp":"2023-12-30T21:05:07.118Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T21:05:32.583Z"}
{"level":"info","message":"Storing image: le-meilleur-des-monde.jpeg","timestamp":"2023-12-30T21:05:34.470Z"}
{"level":"error","message":"id is not defined","requestPayload":{"body":{"author":"Aldous Huxley ","title":"Le meilleur des monde"},"originalUrl":"/book/11444","params":{},"rawHeaders":["Host","localhost:3000","Content-Type","multipart/form-data; boundary=X-INSOMNIA-BOUNDARY","User-Agent","insomnia/8.4.2","Accept","*/*","Content-Length","86517"],"route":{"methods":{"patch":true},"path":"/book/:id","stack":[{"keys":[],"method":"patch","name":"multerMiddleware","regexp":{"fast_slash":false,"fast_star":false}},{"keys":[],"method":"patch","name":"updateBook","regexp":{"fast_slash":false,"fast_star":false}}]}},"stack":"Error\n    at new CustomError (/Users/maxime/Desktop/dev/books_directory/errors/customError.js:6:27)\n    at updateBook (/Users/maxime/Desktop/dev/books_directory/db/queries.js:144:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","statusCode":500,"timestamp":"2023-12-30T21:05:34.489Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T21:06:15.163Z"}
{"level":"info","message":"Storing image: le-meilleur-des-monde.jpeg","timestamp":"2023-12-30T21:06:24.708Z"}
{"level":"error","message":"Le livre avec l'id 11444 n'a pas été trouvé.","requestPayload":{"body":{"author":"Aldous Huxley ","title":"Le meilleur des monde"},"originalUrl":"/book/11444","params":{},"rawHeaders":["Host","localhost:3000","Content-Type","multipart/form-data; boundary=X-INSOMNIA-BOUNDARY","User-Agent","insomnia/8.4.2","Accept","*/*","Content-Length","86517"],"route":{"methods":{"patch":true},"path":"/book/:id","stack":[{"keys":[],"method":"patch","name":"multerMiddleware","regexp":{"fast_slash":false,"fast_star":false}},{"keys":[],"method":"patch","name":"updateBook","regexp":{"fast_slash":false,"fast_star":false}}]}},"stack":"Error\n    at new CustomError (/Users/maxime/Desktop/dev/books_directory/errors/customError.js:6:27)\n    at updateBook (/Users/maxime/Desktop/dev/books_directory/db/queries.js:144:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","statusCode":500,"timestamp":"2023-12-30T21:06:24.727Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T21:07:25.526Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T21:07:48.531Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T21:10:41.311Z"}
{"level":"info","message":"Storing image: le-meilleur-des-monde.jpeg","timestamp":"2023-12-30T21:10:45.164Z"}
{"level":"error","message":"Le livre avec l'id 11444 n'a pas été trouvé.","requestPayload":{"body":{"author":"Aldous Huxley ","title":"Le meilleur des monde"},"originalUrl":"/book/11444","params":{},"rawHeaders":["Host","localhost:3000","Content-Type","multipart/form-data; boundary=X-INSOMNIA-BOUNDARY","User-Agent","insomnia/8.4.2","Accept","*/*","Content-Length","86517"],"route":{"methods":{"patch":true},"path":"/book/:id","stack":[{"keys":[],"method":"patch","name":"multerMiddleware","regexp":{"fast_slash":false,"fast_star":false}},{"keys":[],"method":"patch","name":"updateBook","regexp":{"fast_slash":false,"fast_star":false}}]}},"stack":"Error\n    at new CustomError (/Users/maxime/Desktop/dev/books_directory/errors/customError.js:6:27)\n    at updateBook (/Users/maxime/Desktop/dev/books_directory/db/queries.js:144:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","statusCode":500,"timestamp":"2023-12-30T21:10:45.182Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T21:12:13.339Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T21:14:01.021Z"}
{"level":"info","message":"Storing image: le-meilleur-des-monde.jpeg","timestamp":"2023-12-30T21:14:04.386Z"}
{"level":"error","message":"Le livre avec l'id 11444 n'a pas été trouvé.","requestPayload":{"body":{"author":"Aldous Huxley ","title":"Le meilleur des monde"},"originalUrl":"/book/11444","params":{},"rawHeaders":["Host","localhost:3000","Content-Type","multipart/form-data; boundary=X-INSOMNIA-BOUNDARY","User-Agent","insomnia/8.4.2","Accept","*/*","Content-Length","86517"],"route":{"methods":{"patch":true},"path":"/book/:id","stack":[{"keys":[],"method":"patch","name":"multerMiddleware","regexp":{"fast_slash":false,"fast_star":false}},{"keys":[],"method":"patch","name":"updateBook","regexp":{"fast_slash":false,"fast_star":false}}]}},"statusCode":500,"timestamp":"2023-12-30T21:14:04.405Z"}
{"level":"info","message":"Storing image: le-meilleur-des-monde.jpeg","timestamp":"2023-12-30T21:14:37.818Z"}
{"level":"error","message":"Le livre avec l'id 11445 n'a pas été trouvé.","requestPayload":{"body":{"author":"Aldous Huxley ","title":"Le meilleur des monde"},"originalUrl":"/book/11445","params":{},"rawHeaders":["Host","localhost:3000","Content-Type","multipart/form-data; boundary=X-INSOMNIA-BOUNDARY","User-Agent","insomnia/8.4.2","Accept","*/*","Content-Length","86517"],"route":{"methods":{"patch":true},"path":"/book/:id","stack":[{"keys":[],"method":"patch","name":"multerMiddleware","regexp":{"fast_slash":false,"fast_star":false}},{"keys":[],"method":"patch","name":"updateBook","regexp":{"fast_slash":false,"fast_star":false}}]}},"statusCode":500,"timestamp":"2023-12-30T21:14:37.824Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T21:16:42.114Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T21:17:12.084Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T21:17:22.064Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T21:17:58.049Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T21:19:07.006Z"}
{"level":"info","message":"Storing image: le-meilleur-des-monde.jpeg","timestamp":"2023-12-30T21:19:12.724Z"}
{"level":"error","message":"Le livre avec l'id 11445 n'a pas été trouvé.","requestPayload":{"body":{"author":"Aldous Huxley ","title":"Le meilleur des monde"},"originalUrl":"/book/11445","params":{},"rawHeaders":["Host","localhost:3000","Content-Type","multipart/form-data; boundary=X-INSOMNIA-BOUNDARY","User-Agent","insomnia/8.4.2","Accept","*/*","Content-Length","86517"],"route":{"methods":{"patch":true},"path":"/book/:id","stack":[{"keys":[],"method":"patch","name":"multerMiddleware","regexp":{"fast_slash":false,"fast_star":false}},{"keys":[],"method":"patch","name":"updateBook","regexp":{"fast_slash":false,"fast_star":false}}]}},"statusCode":500,"timestamp":"2023-12-30T21:19:12.742Z"}
{"anotherKey":"anotherValue","key":"value","level":"warn","message":"This is a log message with metadata","timestamp":"2023-12-30T21:20:12.169Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T21:20:12.192Z"}
{"anotherKey":"anotherValue","key":"value","level":"warn","message":"This is a log message with metadata","timestamp":"2023-12-30T21:21:02.368Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T21:21:02.389Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T21:21:50.475Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T21:21:58.846Z"}
{"level":"info","message":"server is listening on port : 3000","timestamp":"2023-12-30T21:22:15.447Z"}
